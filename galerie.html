<!DOCTYPE html>
<html>
<head>
  <title>Bildergalerie</title>
  <style>
    .gallery {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      grid-gap: 10px;
    }

    .gallery img {
      width: 300px;
      height: 300px;
          
      overflow: hidden;
      
      object-fit: cover;
      cursor: pointer;
      
    }
    
    

    .fullscreen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.9);
      display: none;
      justify-content: center;
      align-items: center;
    }

    .fullscreen img {
      max-width: 90%;
      max-height: 90%;
    }

    .fullscreen .arrow {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      width: 50px;
      height: 50px;
      background-color: rgba(0, 0, 0, 0.5);
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 24px;
      color: #fff;
      cursor: pointer;
    }

    .fullscreen .arrow.left {
      left: 10px;
    }

    .fullscreen .arrow.right {
      right: 10px;
    }

    .fullscreen .close {
      position: absolute;
      top: 10px;
      left: 10px;
      width: 30px;
      height: 30px;
      background-color: rgba(0, 0, 0, 0.5);
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 20px;
      color: #fff;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <h1>Bildergalerie</h1>

  <div class="gallery" id="imageGallery"></div>

  <div class="fullscreen" id="fullscreenContainer">
    <div class="close ">&#10005;</div>
    <div class="arrow left ">&lt;</div>
    <img id="fullscreenImage" alt="">
    <div class="arrow right ">&gt;</div>
  </div>

  <script>
    // Verzeichnis und Dateiformat anpassen
    const verzeichnis = "/img/Hintergrund";
    const dateiformat = ".jpg";

    // Bilder und Bildinformationen
    let bilder = [];
    let aktuellesBildIndex = 0;

    // Funktion zum Abrufen aller Dateinamen im Verzeichnis
    function getAlleBilderImVerzeichnis() {
      const galerie = document.getElementById("imageGallery");

      fetch(verzeichnis)
        .then(response => response.text())
        .then(data => {
          const parser = new DOMParser();
          const html = parser.parseFromString(data, "text/html");
          const bildElemente = html.querySelectorAll('a[href$="' + dateiformat + '"]');
          bilder = Array.from(bildElemente).map(bild => {
            return {
              src: verzeichnis + "\\" + bild.getAttribute("href"),
              alt: bild.getAttribute("href")
            };
          });

          bilder.forEach((bild, index) => {
            const img = document.createElement("img");
            img.src = bild.src;
            img.alt = bild.alt;
            img.addEventListener("click", () => zeigeBildFullscreen(index));
            galerie.appendChild(img);
          });
        })
        .catch(error => {
          console.error("Fehler beim Abrufen der Bilder:", error);
        });
    }

    // Funktion zum Anzeigen des Bildes im Vollbildmodus
    function zeigeBildFullscreen(index) {
      const fullscreenContainer = document.getElementById("fullscreenContainer");
      const fullscreenImage = document.getElementById("fullscreenImage");
      aktuellesBildIndex = index;

      fullscreenImage.src = bilder[index].src;
      fullscreenImage.alt = bilder[index].alt;
      fullscreenContainer.style.display = "flex";

      document.addEventListener("keydown", handleKeyDown);
    }

    // Funktion zum Wechseln der Bilder mit den Pfeiltasten im Vollbildmodus
    function handleKeyDown(event) {
      if (event.key === "ArrowLeft") {
        wechsleBild(-1);
      } else if (event.key === "ArrowRight") {
        wechsleBild(1);
      } else if (event.key === "Escape") {
        verlasseVollbild();
      }
    }

    // Funktion zum Wechseln des Bildes im Vollbildmodus
    function wechsleBild(richtung) {
      aktuellesBildIndex = (aktuellesBildIndex + richtung + bilder.length) % bilder.length;
      const fullscreenImage = document.getElementById("fullscreenImage");
      fullscreenImage.src = bilder[aktuellesBildIndex].src;
      fullscreenImage.alt = bilder[aktuellesBildIndex].alt;
    }

    // Funktion zum Verlassen des Vollbildmodus
    function verlasseVollbild() {
      const fullscreenContainer = document.getElementById("fullscreenContainer");
      fullscreenContainer.style.display = "none";
      document.removeEventListener("keydown", handleKeyDown);
    }

    // Galerie initialisieren
    getAlleBilderImVerzeichnis();

    // Funktion zum SchlieÃŸen des Vollbildmodus
    document.getElementById("fullscreenContainer").addEventListener("click", (event) => {
      if (event.target.classList.contains("close")) {
        verlasseVollbild();
      }
    });

    // Funktion zum Wechseln des Bildes mit den Pfeil-Symbolen
    document.querySelector(".arrow.left").addEventListener("click", () => {
      wechsleBild(-1);
    });

    document.querySelector(".arrow.right").addEventListener("click", () => {
      wechsleBild(1);
    });
  </script>
</body>
</html>
